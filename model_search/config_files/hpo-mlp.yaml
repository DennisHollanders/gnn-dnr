search_space:
  # Training hyperparameters
  learning_rate:
    search_type: float
    min: 0.00001
    max: 0.001
    log: true
  
  weight_decay:
    search_type: float
    min: 0.000001
    max: 0.0001
    log: true
  
  batch_size:
    search_type: categorical
    choices: [8, 16, 32, 64]
  
  dropout_rate:
    search_type: float
    min: 0.0
    max: 0.4
  
  activation:
    search_type: categorical
    choices: ["relu", "leaky_relu", "elu", "gelu"]
  
  # GNN Architecture parameters
  gnn_layers:
    search_type: int
    min: 1
    max: 4
  
  gnn_hidden_dim:
    search_type: int
    min: 32
    max: 256
    step: 32
  
  # GAT-specific parameters
  gat_heads:
    search_type: int
    min: 1
    max: 8
  
  gat_dropout:
    search_type: float
    min: 0.0
    max: 0.3
  
  # MLP Components
  use_node_mlp:# Simplified HPO Configuration for GAT Architecture
# Usage: python hpo.py --config hpo-gat-simple.yaml --trials 100 --wandb

description: "GAT Architecture HPO for Distribution Network Reconfiguration"
job_name: "hpo_gat_dnr_simple"

# ============================================================================
# DATA CONFIGURATION
# ============================================================================
dataset_names: ["train", "validation", "test"]
folder_names: 
  - "data\\split_datasets\\train"
  - "data\\split_datasets\\validation"
  - "data\\split_datasets\\test"

dataset_type: "cvx"
batching_type: "standard"
max_nodes: 32000
max_edges: 35000
train_ratio: 0.85
seed: 42
num_workers: 1

# ============================================================================
# MODEL CONFIGURATION
# ============================================================================
model_module: "AdvancedMLP"
epochs: 80
patience: 8
evaluate_every_x_epoch: 5
criterion_name: "MSELoss"

# ============================================================================
# FIXED PARAMETERS (Not optimized)
# ============================================================================
fixed_params:
  # Fix GNN type to GAT only
  gnn_type: "GAT"
  
  # Fix some architectural choices
  use_batch_norm: true
  use_residual: false
  
  # Fix some training parameters if desired
  # batch_size: 32
  # epochs: 80

# ============================================================================
# SEARCH SPACE (Parameters to optimize)
# ============================================================================
search_space:
  # Training hyperparameters
  learning_rate:
    search_type: float
    min: 0.00001
    max: 0.001
    log: true
  
  weight_decay:
    search_type: float
    min: 0.000001
    max: 0.0001
    log: true
  
  batch_size:
    search_type: categorical
    choices: [8, 16, 32, 64]
  
  dropout_rate:
    search_type: float
    min: 0.0
    max: 0.4
  
  activation:
    search_type: categorical
    choices: ["relu", "leaky_relu", "elu", "gelu"]
  
  # GNN Architecture parameters
  gnn_layers:
    search_type: int
    min: 1
    max: 4
  
  gnn_hidden_dim:
    search_type: int
    min: 32
    max: 256
    step: 32
  
  # GAT-specific parameters
  gat_heads:
    search_type: int
    min: 1
    max: 8
  
  gat_dropout:
    search_type: float
    min: 0.0
    max: 0.3
  
  # MLP Components
  use_node_mlp:
    search_type: categorical
    choices: [true, false]
  
  use_edge_mlp:
    search_type: categorical
    choices: [true, false]
  
  # Dynamic hidden dimensions for MLPs
  node_hidden_dims:
    search_type: dynamic
    n_layers_min: 1
    n_layers_max: 3
    dim_min: 32
    dim_max: 256
    dim_step: 32
  
  edge_hidden_dims:
    search_type: dynamic
    n_layers_min: 1
    n_layers_max: 3
    dim_min: 32
    dim_max: 256
    dim_step: 32
  
  # Pooling strategy
  pooling:
    search_type: categorical
    choices: ["mean", "max", "add", "attention"]

# ============================================================================
# W&B SETTINGS
# ============================================================================
wandb_settings:
  project: "DNR-HPO-Simplified"
  group: "gat_architecture_search"
  tags: ["hpo", "advanced_mlp", "gat", "simplified"]

# ============================================================================
# METRICS TO TRACK
# ============================================================================
metrics_to_log:
  - "loss"
  - "val_loss"
  - "f1_score"
  - "val_f1_score"
  - "precision"
  - "recall"
  - "accuracy"